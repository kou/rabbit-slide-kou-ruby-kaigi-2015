= The history of\n testing framework\n in Ruby

: author
   Kouhei Sutou
: institution
   ClearCode Inc.
: content-source
   RubyKaigi 2015
: date
   2015-12-12
: allotted-time
   35m
: theme
   .

= Silver sponsor

  # image
  # src = images/clear-code-is-a-silver-sponsor.png
  # relative_height = 100

== slide property

: enable-title-on-image
   false

= Goal\n(('note:目標'))

(('tag:center'))
(('tag:large'))
You know about\n
(({/\Atest.+unit\z/i}))

(('tag:center'))
(('note:(({/\\Atest.+unit\\z/i}))を知ること'))

= Test\n(('note:テスト'))

(('tag:center'))
Which Rubies do include\n
(({/\Atest.+unit\z/i}))?\n
(('note:(({/\Atest.+unit\z/i}))を含んでいるRubyはどれでしょう？'))

  # RT
  delimiter = [|]

  (('1.4'))   | (('1.6'))   | (('1.8'))
  (('1.9.1')) | (('1.9.2')) | (('1.9.3'))
  (('2.0'))   | (('2.1'))   | (('2.2'))
  (('2.3'))   |             |

= Answer\n(('note:答え'))

(('tag:center'))
Which Rubies do include\n
(({/\Atest.+unit\z/i}))?\n
(('note:(({/\Atest.+unit\z/i}))を含んでいるRubyはどれでしょう？'))

  # RT
  delimiter = [|]

  (('1.4'))   | (('1.6'))   | ((*1.8*))
  ((*1.9.1*)) | ((*1.9.2*)) | ((*1.9.3*))
  ((*2.0*))   | ((*2.1*))   | ((*2.2*))
  ((*2.3*))   |             |

= History\n(('note:歴史'))

= Characters\n(('note:登場人物'))

  # RT

  testsupp, RubyUnit
  Lapidary,
  Test::Unit, test/unit
  test-unit, miniunit
  minitest, RSpec

= Ruby 1.3 times\n(('note:Ruby 1.3の時代'))

  * 1998-1999
  * The first testing framework for Ruby was released\n
    (('note:最初のRuby用のテスティングフレームワークがリリース'))
    * testsupp

= testsupp

  * 1999-4-11: [ruby-talk:00634]\n
    ANN: testsupp.rb 0.1
  * Perl's (({Test})) like API\n
    (('note:PerlのTestモジュールのようなAPI'))
    * Perl's (({Test})) exists since 1998\n
      (('note:PerlのTestモジュールは1998からある'))

= testsupp: API

  # coderay ruby
  require "testsupp"
  include TestSupp

  start_tests
  ok "Hello" == "Hello"
  end_tests

= Ruby 1.4 times\n(('note:Ruby 1.4の時代'))

  * 1999-2000
  * The first xUnit testing framework for Ruby was released\n
    (('note:最初のRuby用のxUnit系テスティングフレームワークが'))\n
    (('note:リリース'))
    * RubyUnit

= RubyUnit

  * Since 1999-11-20 at least\n
    (('note:少なくとも1999年11月20日には存在していた'))
    * [ruby-list:18594]\n
      (('note:"RubyUnit のページは当分更新されないと思うです．"'))
  * The first xUnit testing framework for Ruby\n
    (('note:最初のRuby用のxUnit系テスティングフレームワーク'))

= RubyUnit: API

  # coderay ruby
  require "runit/testcase"
  class Test < RUNIT::TestCase
    def test_add
      assert_equal(3, 1 + 2)
    end
  end

= RubyUnit: Impression\n(('note:感想'))

Ruby-ish\n
(('note:Rubyっぽい'))

= RubyUnit: FYI\n(('note:参考情報'))

  * Test generator exists\n
    (('note:テストジェネレーターがある'))
  * Test exec command exists\n
    (('note:テスト実行コマンドがある'))
  * (('wait'))
    (('note:rubyunit gem exists since 2014-10-12'))\n
    (('note:rubyunitというgemが存在する'))
    * (('note:Not related product'))\n
      (('note:関係のないプロダクト'))

= Ruby 1.6 times: 1\n(('note:Ruby 1.6の時代：1'))

  * 2000-2002
  * The second xUnit testing framework for Ruby was released\n
    (('note:2つ目のRuby用のxUnit系テスティングフレームワークが'))\n
    (('note:リリース'))
    * Lapidary

= Lapidary

  * The first release was 2001-03-20\n
    (('note:最初のリリースは2001年3月20日'))
  * The second xUnit testing framework for Ruby\n
    (('note:2つ目のRuby用のxUnit系テスティングフレームワーク'))
    * Maybe\n
      (('note:たぶん'))

= Lapidary: API

  # coderay ruby
  require "Lapidary/TestCase"
  class TC_Adder < Lapidary::TestCase
    def testAdd
      assertEqual(3, 1 + 2)
    end
  end

= Lapidary: Impression\n(('note:感想'))

Not Ruby-ish\n
(('note:Rubyっぽくない'))

= Lapidary: FYI\n(('note:参考情報'))

  * Has GUI test runner\n
    (('note:GUIのテスト実行機能アリ'))

= Ruby 1.6 times: 2\n(('note:Ruby 1.6の時代：2'))

  * Start trying to bundle a testing framework to Ruby\n
    (('note:テスティングフレームワークをRubyにバンドルする'))\n
    (('note:試みを開始'))
    * RubyUnit + Lapidary = Test::Unit

= Test::Unit

  * Since 2002-02:\n
    [ruby-talk:34744]
  * The first (({\A/test.+unit\z/}))\n
    (('note:最初の(({/\\Atest.+unit\\z/i}))'))
  * The author is the author of Lapidary\n
    (('note:Lapidaryの作者が作者'))

= Test::Unit: API

  # coderay ruby
  require "test/unit"
  class TC_Adder < Test::Unit::TestCase
    def test_add
      assert_equal(3, 1 + 2)
    end
  end

= Test::Unit: Impression\n(('note:感想'))

Ruby-ish\n
(('note:Rubyっぽい'))

= Test::Unit: FYI 1\n(('note:参考情報1'))

  * API is based on RubyUnit\n
    (('note:APIはRubyUnitのよう'))
    * Has RubyUnit compatible API\n
      (('note:RubyUnit互換APIアリ'))
  * Impl. is based on Lapidary\n
    (('note:実装はLapidaryベース'))
    * Has GUI test runner\n
      (('note:GUIのテスト実行機能アリ'))

= Wrap up: Before Ruby 1.8\n(('note:Ruby 1.8の前までのまとめ'))

  * testsupp: Perl like API
  * RubyUnit: Rubyish xUnit
  * Lapidary: Not Rubyish xUnit
  * Test::Unit:
    * RubyUnit API + Lapidary Impl.

= Ruby 1.8 times: 1\n(('note:Ruby 1.8の時代：1'))

  * 2003-2013
  * Ruby bundles a testing framework\n
    (('note:Rubyがテスティングフレームワークをバンドルした'))
    * Test::Unit aka test/unit\n
      (('note:バンドルされたのはTest::Unit'))\n
      (('note:test/unitとも呼ばれる'))

= FYI: Why test/unit?\n(('note:参考情報：なぜtest/unitと呼ぶか'))

  # coderay ruby
  require "test/unit"

= Test::Unit in Ruby 1.8\n(('note:Ruby 1.8バンドル後のTest::Unit'))

  * No active development\n
    (('note:開発は停滞'))
  * Maintainer is changed\n
    (('note:メンテナー交代'))
    * The author of minitest\n
      (('note:後のminitestの作者'))

= Test::Unit:\nnew maintainer\n(('note:新しいメンテナー'))

  * New maintainer said:\n
    (('note:新メンテナー曰く'))
    * Can't maintain Test::Unit because it's too complex\n
      (('note:Test::Unitは複雑すぎてメンテナンスできない'))

= Ruby 1.8 times: 2\n(('note:Ruby 1.8の時代：2'))

RSpec was born\n
(('note:RSpec誕生'))

= RSpec

  * Since 2005-08
  * Tool for Behavior Driven Development\n
    (('note:振る舞い駆動開発用のツール'))
  * Active development\n
    (('note:開発は活発'))

= RSpec 0.1.0: API

  # coderay ruby
  # 2005-08
  require "spec"
  class SpecAdd < Spec::Context
    def add
      (1 + 2).should_equal 3
    end
  end

= RSpec: 1.0.0: API

  # coderay ruby
  # 2007-05
  require "spec"
  describe "Add" do
    it "should support positive + positive" do
      (1 + 2).should == 3
    end
  end

= RSpec 1.0.0: Impression\n(('note:感想'))

Engl-ish\n
(('note:英語っぽい'))

= RSpec: FYI\n(('note:参考情報'))

  * Test exec command exists\n
    (('note:テスト実行コマンドがある'))
    * RubyUnit like\n
      (('note:RubyUnitみたい'))
  * More features (('note:than Test::Unit'))\n
    (('note:Test::Unitより機能が多い'))
    * Mock, Not implemented, ...\n
      (('note:モックや未実装など'))

= Wrap up: Ruby 1.8 times\n(('note:Ruby 1.8時代のまとめ'))

  * Ruby starts bundling Test::Unit (('note:((({/\\Atest.+unit\\z/i})))'))\n
    (('note:RubyがTest::Unitのバンドルを始めた'))
    * But Test::Unit was died...\n
      (('note:バンドル後、Test::Unitは死んだ。。。'))
  * RSpec was born and active\n
    (('note:RSpecが生まれ、活発だった'))

= Ruby 1.9 times\n(('note:Ruby 1.9の時代'))

  * 2009-2014
  * Ruby drops Test::Unit\n
    (('note:RubyがTest::Unitを捨てた'))
    * Because Test::Unit is too complex for new maintainer\n
      (('note:新メンテナーにはTest::Unitは複雑すぎるから'))

= Test::Unit → test-unit

  * Released as test-unit gem\n
    (('note:test-unit gemとしてリリース'))
    * Still (({/\Atest.+unit\z/i}))\n
      (('note:名前変更後も(({/\Atest.+unit\z/i}))'))
    * (('note:test-unit 1.2.3 == Test::Unit in Ruby 1.8'))
  * Maintainer is changed\n
    (('note:メンテナー交代'))
    * Me\n
      (('note:私'))

= test-unit

  * Since 2008-03
  * Active development\n
    (('note:開発は活発'))
  * High backward compatibility\n
    (('note:高い後方互換性'))
    * Exception: Inheritance, Mixin\n
      (('note:例外：継承時・Mixin時の挙動'))

= minitest

  * Since 2008-10
  * Active development\n
    (('note:開発は活発'))
  * The author is the new maintainer of Test::Unit\n
    (('note:作者はTest::Unitの新メンテナー'))

= minitest and Test::Unit

  * Mini, simple, clean and fast\n
    (('note:小さくてシンプルでキレイで速い'))
  * The author said:\n
    (('note:作者曰く'))
    * 100% Test::Unit compatible\n
      (('note:Test::Unitと100%互換'))

= test/unit in Ruby 1.9

  * Not Test::Unit (('note:but (({/\\Atest.+unit\\z/i}))'))\n
    (('note:Test::Unitではないが(({/\\Atest.+unit\\z/i}))ではある'))
  * Provide Test::Unit API\n
    (('note:Test::Unit互換APIを提供'))
  * Wrapper of minitest\n
    (('note:minitestのラッパー'))
    * Ruby developers develop it\n
      not minitest author\n
      (('note:minitestの作者ではなくRuby開発者が開発'))

= Wrap up: Ruby 1.9 times\n(('note:Ruby 1.9時代のまとめ'))

  * Ruby drops Test::Unit\n
    (('note:RubyがTest::Unitを捨てた'))
    * (('note:Test::Unit → test-unit gem'))
  * Ruby bundles minitest\n
    (('note:Rubyはminitestをバンドルした'))
  * Ruby creates test/unit\n
    (('note:(test/unit provides Test::Unit API)'))\n
    (('note:RubyはTest::Unit APIを提供する(({test/unit}))を新しく作った'))

= Ruby 2.0 times\n(('note:Ruby 2.0の時代'))

  * 2013-
  * No highly important things\n
    (('note:特筆すべきことはない'))
    * test-unit, minitest and RSpec were actively developed\n
      (('note:test-unitもminitestもRSpecも活発に開発が進んでいた'))

= Ruby 2.1 times: 1\n(('note:Ruby 2.1の時代：1'))

  * 2014-
  * minitest 5 introduced incompatible change\n
    (('note:minitest 5で非互換の変更が入った'))

= minitest 5

  * test/unit maintainer said:\n
    (('note:test/unitメンテナー曰く'))
    * Can't maintain test/unit with minitest 5\n
      (('note:minitest 5向けのtest/unitはメンテナンスできない'))
  * test/unit for minitest was dropped\n
    (('note:minitestのラッパーとしてのtest/unitを捨てた'))

= Is no test/unit problem?\n(('note:test/unitがないことは問題なのか？'))

  * Ruby uses test/unit for Ruby's test\n
    (('note:RubyはRubyのテストにtest/unitを使っている'))
    * No test/unit means existing tests can't be worked\n
      (('note:test/unitがなくなると既存のテストが動かない'))

= Solution: 1\n(('note:解決案：1'))

  * Keep bundling and using minitest 4\n
    (('note:minitest 4のバンドルを継続し、使い続ける'))
    * Users will be confused because the latest Ruby doesn't bundle the latest minitest\n
      (('note:最新のRubyに最新のminitestがバンドルされていないとユーザーは混乱しそう'))
